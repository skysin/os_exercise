# lec8

## 8.1

* 寄存器和高速缓存位于CPU内部，访问速度极快，不需要软件的参与，但是存储容量不大。被访问的频率十分频繁。内存和外存在CPU外，被操作系统所管理。内存的访问速度较快，而外存的访问速度则远慢于内存，通常在ms量级。然而外存的容量往往十分巨大。高速缓存作为内存的部分备份，旨在提高内存的访问速度，相比其他三中存储，外存的访问频率较低。

* 均衡繁忙是指，各种存储介质都处理繁忙状态，但又不构成系统瓶颈；

* 数组排序、动态链接库...

## 8.2

* 覆盖：划分程序功能模块、不会同时执行的模块共享同一块内存,程序员的任务：模块划分、确定模块的共享关系

* 交换：作为一个整体的进程地址空间的换入和换出;覆盖：通过切块，解决进程空间大于物理内存的问题；交换：通过进程整体交换，解决高优先级进程运行需要的内存空间不够问题；

* 理清模块间的包含和调用关系，可以采用拓扑排序的方式找出内核中较底层的基础模块和模块间的依赖关系。

* 静态代码分析、动态函数调用跟踪

## 8.3

* 时间局部性是指程序刚刚访问过的数据在接下来的一段时间很有可能被再次访问。空间局部性是指当内存中某一数据被访问时，接下来很有可能要访问其周围的数据。分支局部性是指程序分支的选择执行往往会在同一分支重复较多次。

* 有意识地规范程序跳转和数据访问

* 调用范围逐渐变小，

## 8.4

* 虚拟存储：只把当前指令执行所需要的部分进程地址空间内容放在物理内存中；虚拟存储的特征：不连续性、大用户空间、部分交换

* 硬件：地址转换；操作系统：置换算法（换入和换出的区域选择）

## 8.5

* 虚拟页式存储是指当应用程序申请内存时，先为其分配虚拟的页空间，而不再物理内存上分配实际的内存空间，只有当分配的虚拟内存空间被访问时，才为其虚拟内存空间映射实际的物理内存。缺页中断处理是在应用程序访问内存，对应的虚拟内存空间不在物理内存中，即发生了页缺失异常时，由操作系统分配实际的物理内存或将对应的物理内存从外存调用内存，使得应用程序能够正常访问内存，继续执行。

* 驻留位：表示是否在内存；修改位：表示是否被修改过；访问位：表示是否被访问过；保护位：表示允许页面访问方式；

* 页式存储是指操作系统以固定大小的页为单位进行内存的分配和管理。虚拟页式存储是指通过地址转换和页面置换使得应用程序能够共享地址空间，都认为自己独占了内存。通过虚拟页式存储提供比实际物理存储更大的内存空间。

## 8.6

* 指令执行中的页表项引用；由于页面不在内存，导致缺页异常；在外存中查找需要访问的页面备份；页面换入；页表项修改；重新执行导致缺页异常的指令；

* EAT = 访存时间*(1-p) + 缺页异常处理时间*缺页率p